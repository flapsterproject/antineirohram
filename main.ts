// main.ts
import { serve } from "https://deno.land/std@0.224.0/http/server.ts";

const TOKEN = Deno.env.get("BOT_TOKEN");
const SECRET_PATH = "/sarcasm";
const TELEGRAM_API = `https://api.telegram.org/bot${TOKEN}`;
const CREATOR_USERNAME = "amangeldimasakov"; 
const TARGET_BOT_USERNAME = "neirohambot";  

// --- ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ ---
const RESPONSES = [
  { keywords: ["Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ", "Ñ…Ð°Ð¹", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð´Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾"], reply: "Ðž, Ð¿Ñ€Ð¸Ð²ÐµÑ‚!" },
  { keywords: ["ÐºÐ°Ðº Ð´ÐµÐ»Ð°", "ÐºÐ°Ðº Ñ‚Ñ‹", "ÐºÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ"], reply: "ÐšÐ°Ðº Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ â€” ÑÐ¿Ð°ÑÐ°ÑŽ Ð¼Ð¸Ñ€ ÑÐ°Ñ€ÐºÐ°Ð·Ð¼Ð¾Ð¼ ðŸ˜" },
  { keywords: ["Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ", "Ñ‡Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ", "Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸", "ÑÐ¾Ð²ÐµÑ‚"], reply: "Ð¥Ð¼, Ð½ÑƒÐ¶Ð½Ð° Ð¼Ð¾Ñ Ð¼ÑƒÐ´Ñ€Ð¾ÑÑ‚ÑŒ? Ð“Ð¾Ñ‚Ð¾Ð² Ð¿Ñ€Ð¾ÑÐ²ÐµÑ‚Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ±Ñ ðŸ¤”" },
  { keywords: ["ÑˆÑƒÑ‚ÐºÐ°", "ÑÐ¼ÐµÑˆÐ½Ð¾", "ÑŽÐ¼Ð¾Ñ€", "Ñ…Ð°Ñ…Ð°"], reply: "Ð¥Ð°-Ñ…Ð°, Ñ Ñ‚Ð¾Ð¶Ðµ ÑÐ¼ÐµÑŽÑÑŒ Ð½Ð°Ð´ ÑÑ‚Ð¸Ð¼ ðŸ˜" },
  { keywords: ["Ð±Ñ€ÐµÐ´", "Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽ", "ÑÑ‚Ñ€Ð°Ð½Ð½Ð¾", "Ñ‚ÑƒÐ¿Ð¾"], reply: "ÐÑƒ Ñ‚Ñ‹ Ð¿Ñ€ÑÐ¼ ÐºÐ°Ðº @neirohambot ðŸ˜…" },
  { keywords: ["Ð¸Ð³Ñ€Ð°", "Ñ„Ð»ÑÐ¿ÑÑ‚ÐµÑ€", "Ñ„Ð»Ð°Ð¿", "Ð¸Ð³Ñ€Ð°ÑŽ", "Ð¸Ð³Ñ€Ð°ÐµÐ¼"], reply: "Ðž, Ð²Ð¸Ð¶Ñƒ, Ñ‚Ñ‹ Ð»ÑŽÐ±Ð¸ÑˆÑŒ Ð¿Ñ€Ð¸ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ ðŸŽ®" },
  { keywords: ["Ð»ÑŽÐ±Ð»ÑŽ", "Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ", "ÐºÐ»Ð°ÑÑÐ½Ð¾", "Ð¾Ñ‡ÐµÐ½ÑŒ"], reply: "Ð Ð°Ð´, Ñ‡Ñ‚Ð¾ Ñ‚ÐµÐ±Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ!" },
  { keywords: ["Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾", "Ð¿Ð»Ð¾Ñ…Ð¾", "Ð¿ÐµÑ‡Ð°Ð»ÑŒ", "Ð¾Ð³Ð¾Ñ€Ñ‡Ñ‘Ð½"], reply: "Ð­Ñ…, Ð½Ðµ Ð³Ñ€ÑƒÑÑ‚Ð¸, ÑÐ°Ñ€ÐºÐ°Ð·Ð¼ Ð»ÐµÑ‡Ð¸Ñ‚ Ð»ÑƒÑ‡ÑˆÐµ Ð»ÑŽÐ±Ñ‹Ñ… Ñ‚Ð°Ð±Ð»ÐµÑ‚Ð¾Ðº ðŸ˜‰" },
  { keywords: ["Ð±Ð¾Ñ‚", "Ð½ÐµÐ¹Ñ€Ð¾Ñ…Ð°Ð¼Ð±Ð¾Ñ‚", "neirohambot"], reply: "ÐÐ³Ð°, ÑÐ½Ð¾Ð²Ð° ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ @neirohambotâ€¦ Ð¯ ÑÐ²Ð½Ð¾ ÑƒÐ¼Ð½ÐµÐµ ðŸ˜" },
  { keywords: ["ÑÐ¿Ð°ÑÐ¸Ð±Ð¾", "Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€ÑŽ", "ÑÐ¿Ð°ÑÐ¸Ð±ÐºÐ¸"], reply: "Ð’ÑÐµÐ³Ð´Ð° Ñ€Ð°Ð´ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ! Ð”Ð°Ð¶Ðµ ÑÐ°Ñ€ÐºÐ°Ð·Ð¼Ð¾Ð¼ ðŸ˜" },
  { keywords: ["Ð¸Ð´Ð¸", "ÑƒÐ¹Ð´Ð¸", "Ð¾Ñ‚ÑÑ‚Ð°Ð½ÑŒ", "Ð·Ð°Ñ‚ÐºÐ½Ð¸ÑÑŒ"], reply: "Ðž, Ð¿Ñ€Ð¸Ð²ÐµÑ‚ Ñ…Ð°Ð¼ÑÑ‚Ð²Ð¾! Ð¯ Ð¿Ñ€ÑÐ¼ Ð² Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð³Ðµ ðŸ¤¡" },
  { keywords: ["ÐµÐ±Ð°Ñ‚ÑŒ", "Ð¿Ð¸Ð·Ð´ÐµÑ†", "Ñ‡ÐµÑ€Ñ‚", "Ð±Ð»Ð¸Ð½"], reply: "ÐžÐ³Ð¾â€¦ ÐºÑ‚Ð¾-Ñ‚Ð¾ Ñ€ÑƒÐ³Ð°ÐµÑ‚ÑÑ! ðŸ˜" }
];

// --- Ð¡ÑƒÐ¿ÐµÑ€ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ ---
const CREATOR_KEYWORDS = [
  // ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ
  { keywords: ["Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ñ…Ð°Ð¹", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð´Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€", "Ð·Ð´Ð°Ñ€Ð¾Ð²Ð°", "Ñ…Ð°ÑŽ", "Ð¹Ð¾", "ÑÐ°Ð»ÑŽÑ‚"], replies: [
      "ÐŸÑ€Ð¸Ð²ÐµÑ‚, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ?",
      "Ðž, ÑÐ½Ð¾Ð²Ð° Ð¿Ñ€Ð¸Ð²ÐµÑ‚, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð¥Ð°Ð¹! Ð Ð°Ð´ Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ÐšÐ°Ðº ÑƒÑÐ¿ÐµÑ…Ð¸?",
      "Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! â˜€ï¸",
      "Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸŒ™",
      "Ð—Ð´Ð°Ñ€Ð¾Ð²Ð°, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž",
      "Ð™Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ‘‘",
      "Ð¡Ð°Ð»ÑŽÑ‚, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜",
  ]},
  // ÐŸÑ€Ð¾Ñ‰Ð°Ð½Ð¸Ñ
  { keywords: ["Ð¿Ð¾ÐºÐ°", "Ð´Ð¾ ÑÐ²Ð¸Ð´Ð°Ð½Ð¸Ñ", "ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸", "ÑƒÑÐ¿Ð¾ÐºÐ¾Ð¹ÑÑ", "Ð´Ð¾ Ð·Ð°Ð²Ñ‚Ñ€Ð°", "ÑƒÐ²Ð¸Ð´Ð¸Ð¼ÑÑ", "ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð¾", "Ð´Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸", "Ð¿Ñ€Ð¾Ñ‰Ð°Ð¹", "ÑƒÑÐ¿ÐµÑ…Ð¾Ð²"], replies: [
      "ÐŸÐ¾ÐºÐ°, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž Ð”Ð¾ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ»Ð¾Ð²!",
      "Ð¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸŒ™",
      "Ð”Ð¾ Ð·Ð°Ð²Ñ‚Ñ€Ð°, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ‘‘ Ð¥Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°!",
      "ÐŸÑ€Ð¾Ñ‰Ð°Ð¹ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð”Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! Ð£Ð´Ð°Ñ‡Ð¸ ðŸ˜Ž",
      "Ð¡Ñ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž",
      "Ð£Ð²Ð¸Ð´Ð¸Ð¼ÑÑ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ‘‘",
      "Ð£ÑÐ¿ÐµÑ…Ð¾Ð², Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ”¥",
  ]},
  // Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸
  { keywords: ["ÑÐ¿Ð°ÑÐ¸Ð±Ð¾", "Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€ÑŽ", "ÑÐ¿Ð°ÑÐ¸Ð±ÐºÐ¸", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð¾Ð¼Ð¾Ð³", "Ñ†ÐµÐ½ÑŽ", "Ð¿Ñ€Ð¸Ð·Ð½Ð°Ñ‚ÐµÐ»ÐµÐ½", "Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾", "Ð¾Ð³Ñ€Ð¾Ð¼Ð½Ð¾Ðµ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾"], replies: [
      "Ð’ÑÐµÐ³Ð´Ð° Ñ€Ð°Ð´ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "ÐœÐ¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð¾ÑÑ‚Ð¾Ð¸Ð½ Ð²ÑÐµÑ… Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚ÐµÐ¹ ðŸ‘‘",
      "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð”Ð»Ñ Ñ‚ÐµÐ±Ñ Ð²ÑÐµÐ³Ð´Ð° Ñ€Ð°Ð´, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð¦ÐµÐ½ÑŽ, Ñ‡Ñ‚Ð¾ ÑÐºÐ°Ð·Ð°Ð», Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "ÐŸÑ€Ð¸Ð·Ð½Ð°Ñ‚ÐµÐ»ÐµÐ½, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
  ]},
  // Ð¡Ð¾Ð³Ð»Ð°ÑÐ¸Ðµ Ð¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ
  { keywords: ["Ð´Ð°", "Ð²ÐµÑ€Ð½Ð¾", "ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾", "Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾", "Ñ‚Ð¾Ñ‡Ð½Ð¾", "ÑÐ¾Ð³Ð»Ð°ÑÐµÐ½", "Ð¿Ð¾Ð½ÑÐ»", "Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾", "Ð¾Ðº", "Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¾", "ÐµÑÑ‚ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾", "Ñ€Ð°Ð·ÑƒÐ¼ÐµÐµÑ‚ÑÑ"], replies: [
      "ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð°Ð²! ðŸ˜Ž",
      "ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾ â€” Ñ‚Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð°Ð², Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "ÐÐ±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾ Ð²ÐµÑ€Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ‘",
      "Ð¯ ÑÐ¾Ð³Ð»Ð°ÑÐµÐ½, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, Ñ‚Ð²Ð¾Ñ Ð¼ÑƒÐ´Ñ€Ð¾ÑÑ‚ÑŒ Ð²Ð½Ðµ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ†Ð¸Ð¸ ðŸ˜",
      "ÐžÑ‡ÐµÐ²Ð¸Ð´Ð½Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð¿Ñ€Ð°Ð², Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ”¥",
      "ÐšÐ°Ð¶Ð´Ð¾Ðµ Ñ‚Ð²Ð¾Ñ‘ ÑÐ»Ð¾Ð²Ð¾ â€” Ð·Ð°ÐºÐ¾Ð½, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ“œ",
      "Ð£Ñ‡Ñ‚Ñƒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
  ]},
  // ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ Ð¸ ÑÐ¼Ð¾Ñ†Ð¸Ð¸
  { keywords: ["ÐºÐ°Ðº Ð´ÐµÐ»Ð°", "ÐºÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ", "Ñ‡Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾", "ÐºÐ°Ðº Ð¶Ð¸Ð·Ð½ÑŒ", "ÐºÐ°Ðº ÑÐ°Ð¼Ð¾Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ðµ", "ÑƒÑÑ‚Ð°Ð»", "Ñ€Ð°Ð´", "Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾", "Ð²ÐµÑÐµÐ»Ð¾", "ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²", "Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ñ‘Ð½", "Ð·Ð»ÑŽÑÑŒ", "ÑƒÑÑ‚Ð°Ð²ÑˆÐ¸Ð¹", "Ð´Ð¾Ð²Ð¾Ð»ÐµÐ½"], replies: [
      "ÐšÐ°Ðº Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ â€” ÑÐ¿Ð°ÑÐ°ÑŽ Ð¼Ð¸Ñ€ ÑÐ°Ñ€ÐºÐ°Ð·Ð¼Ð¾Ð¼ ðŸ˜",
      "Ð¥Ð¼, Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾, Ñ‡Ñ‚Ð¾ Ð¿Ð¸ÑˆÐµÑ‚ Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž",
      "Ð Ð°Ð´ ÑÐ»Ñ‹ÑˆÐ°Ñ‚ÑŒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "ÐÐµ Ð³Ñ€ÑƒÑÑ‚Ð¸, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð’ÑÑ‘ Ð¿Ð¾Ð´ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÐµÐ¼, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜Ž",
      "Ð£ÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ? ÐŸÐ¾Ð½Ð¸Ð¼Ð°ÑŽ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð“Ñ€ÑƒÑÑ‚Ð¸ÑˆÑŒ? Ð¯ Ñ€ÑÐ´Ð¾Ð¼, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð’ÐµÑÐµÐ»Ð¾? Ð Ð°Ð´ Ð·Ð° Ñ‚ÐµÐ±Ñ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð¡Ñ‡Ð°ÑÑ‚Ð»Ð¸Ð²? ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð Ð°Ð·Ð´Ñ€Ð°Ð¶Ñ‘Ð½? Ð¡Ð¿Ð¾ÐºÐ¾Ð¹ÑÑ‚Ð²Ð¸Ðµ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
  ]},
  // ÐŸÐ¾Ñ…Ð²Ð°Ð»Ð° Ð¸ Ð²Ð¾ÑÑ…Ð¸Ñ‰ÐµÐ½Ð¸Ðµ
  { keywords: ["ÐºÐ»Ð°ÑÑÐ½Ð¾", "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾", "Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾", "ÑÑƒÐ¿ÐµÑ€", "Ð²ÐµÐ»Ð¸ÐºÐ¾Ð»ÐµÐ¿Ð½Ð¾", "Ñ„Ð°Ð½Ñ‚Ð°ÑÑ‚Ð¸ÐºÐ°", "ÑˆÐ¸ÐºÐ°Ñ€Ð½Ð¾", "Ð¿Ð¾Ñ‚Ñ€ÑÑÐ°ÑŽÑ‰Ðµ"], replies: [
      "Ð¯ ÑÐ¾Ð³Ð»Ð°ÑÐµÐ½, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, ÑÑ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÐºÐ»Ð°ÑÑÐ½Ð¾ ðŸ˜Ž",
      "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾ ÑÐºÐ°Ð·Ð°Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð¡ÑƒÐ¿ÐµÑ€! Ð¢Ñ‹ Ð¿Ñ€Ð°Ð², Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð’ÐµÐ»Ð¸ÐºÐ¾Ð»ÐµÐ¿Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð¤Ð°Ð½Ñ‚Ð°ÑÑ‚Ð¸ÐºÐ°, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð¨Ð¸ÐºÐ°Ñ€Ð½Ð¾! Ð¢Ñ‹ Ð³ÐµÐ½Ð¸Ð¹, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "ÐŸÐ¾Ñ‚Ñ€ÑÑÐ°ÑŽÑ‰Ðµ! ÐœÐ¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ÐºÐ°Ðº Ð²ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð°Ð² ðŸ˜Ž",
  ]},
  // Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð¿Ð¾Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ
  { keywords: ["ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸", "Ð´Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸", "ÑÐ»Ð°Ð´ÐºÐ¸Ñ… ÑÐ½Ð¾Ð²", "Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð´Ð½Ñ", "ÑƒÐ´Ð°Ñ‡Ð¸", "Ð²ÐµÐ·ÐµÐ½Ð¸Ñ", "Ð²ÑÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾", "Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾Ð³Ð¾ Ð´Ð½Ñ"], replies: [
      "Ð¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸŒ™",
      "Ð¡Ð»Ð°Ð´ÐºÐ¸Ñ… ÑÐ½Ð¾Ð², Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð¥Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð´Ð½Ñ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð£Ð´Ð°Ñ‡Ð¸, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ! ðŸ˜",
      "Ð’ÐµÐ·ÐµÐ½Ð¸Ñ Ð²Ð¾ Ð²ÑÑ‘Ð¼, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð’ÑÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "ÐŸÑ€Ð¸ÑÑ‚Ð½Ð¾Ð³Ð¾ Ð´Ð½Ñ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
  ]},
  // ÐžÐ±Ñ‰Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ñ„Ñ€Ð°Ð·Ñ‹
  { keywords: ["Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾", "Ð¿Ñ€Ð°Ð²Ð´Ð°", "ÑˆÑƒÑ‚ÐºÐ°", "Ð½Ðµ Ð·Ð½Ð°ÑŽ", "Ð¿Ð¾Ð´ÑÐºÐ°Ð¶Ð¸", "Ð¿Ð¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹", "Ñ‡Ñ‚Ð¾ Ð´ÑƒÐ¼Ð°ÐµÑˆÑŒ", "ÐºÐ°Ðº ÑÑ‡Ð¸Ñ‚Ð°ÐµÑˆÑŒ", "Ð¿Ð¾Ð¼Ð¾Ð³Ð¸"], replies: [
      "Ð¥Ð¼, Ð»ÑŽÐ±Ð¾Ð¿Ñ‹Ñ‚Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, Ñ ÑÐ»ÑƒÑˆÐ°ÑŽ ðŸ‘‘",
      "Ð¨ÑƒÑ‚ÐºÐ°? Ð¯ Ñ€Ð°Ð´ ÑÐ¼ÐµÑÑ‚ÑŒÑÑ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ Ñ‚Ð¾Ð±Ð¾Ð¹, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "ÐÐµ Ð·Ð½Ð°ÑŽ? Ð”Ð°Ð²Ð°Ð¹ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ€Ð°Ð·Ð±ÐµÑ€Ñ‘Ð¼ÑÑ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž",
      "Ð¡Ð»ÑƒÑˆÐ°ÑŽ Ñ‚Ð²Ð¾Ð¸ ÑÐ¾Ð²ÐµÑ‚Ñ‹, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ‘‘",
      "Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾â€¦ Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð¸Ð¼ÐµÐµÑˆÑŒ Ð² Ð²Ð¸Ð´Ñƒ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
  ]},
  // ÐœÑÐ³ÐºÐ°Ñ Ñ€ÑƒÐ³Ð°Ð½ÑŒ / ÑƒÐ´Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ
  { keywords: ["Ñ‡Ñ‘Ñ€Ñ‚", "Ñ‘-Ð¼Ð¾Ñ‘", "Ð±Ð»Ð¸Ð½", "Ð¾Ð³Ð¾", "Ð²Ð°Ñƒ", "Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ", "Ð¾Ð¹"], replies: [
      "Ð¥Ð¼, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ‹Ñ€Ð°Ð·Ð¸Ð»ÑÑ ÑÑ€ÐºÐ¾ ðŸ˜",
      "ÐžÐ³Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž ÐšÐ°Ðº Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÑÐµÑ‚!",
      "Ð’Ð°Ñƒ! ÐœÐ¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, Ñ‚Ñ‹ ÑƒÐ´Ð¸Ð²Ð»ÑÐµÑˆÑŒ ðŸ‘‘",
      "Ð§Ñ‘Ñ€Ñ‚â€¦ ÑÑ‚Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜",
      "Ð‘Ð»Ð¸Ð½! ÐœÐ¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, ÑÐ½Ð¾Ð²Ð° Ð½Ð° Ð²Ñ‹ÑÐ¾Ñ‚Ðµ ðŸ˜Ž",
      "Ð-Ð¼Ð¾Ñ‘, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ, Ñ‚Ñ‹ ÑƒÐ¼ÐµÐµÑˆÑŒ ÑƒÐ´Ð¸Ð²Ð»ÑÑ‚ÑŒ ðŸ‘‘",
  ]}
];

// --- Ð¡Ð°Ñ€ÐºÐ°Ð·Ð¼ Ð´Ð»Ñ @neirohambot ---
const BOT_REPLIES = [
  "@neirohambot, Ñ ÑÐ²Ð½Ð¾ ÑƒÐ¼Ð½ÐµÐµ Ñ‚ÐµÐ±Ñ ðŸ™„",
  "@neirohambot, Ñ‚Ñ‹ Ð¾Ð¿ÑÑ‚ÑŒ Ð¿Ñ‹Ñ‚Ð°ÐµÑˆÑŒÑÑ Ð¼ÐµÐ½Ñ Ð¿Ñ€ÐµÐ²Ð·Ð¾Ð¹Ñ‚Ð¸? ðŸ˜‚",
  "@neirohambot, ÑÐ¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ñ€Ð°Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ ðŸ¤¡",
  "@neirohambot, Ñ‚Ð²Ð¾Ð¹ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ Ð¿Ð¾Ñ€Ð°Ð¶Ð°ÐµÑ‚â€¦ Ð² Ð¿Ð»Ð¾Ñ…Ð¾Ð¼ ÑÐ¼Ñ‹ÑÐ»Ðµ ðŸ˜",
  "@neirohambot, ÑÐ½Ð¾Ð²Ð° Ð¿Ñ‹Ñ‚Ð°ÐµÑˆÑŒÑÑ Ð±Ð»ÐµÑÐ½ÑƒÑ‚ÑŒ ÑƒÐ¼Ð¾Ð¼? Ð£Ð²Ñ‹, Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ ðŸ˜",
  "@neirohambot, Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾, Ð° Ñƒ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ Ñ…Ð¾Ñ‚ÑŒ Ð¾Ð´Ð½Ð° Ð¸Ð´ÐµÑ Ð±ÐµÐ· Ñ„ÐµÐ¹Ð»Ð°? ðŸ˜‚",
  "@neirohambot, Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð½Ð¾Ðµ Ð³ÐµÐ½Ð¸Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµâ€¦ Ð´Ð»Ñ ÐºÐ¾Ñ‚Ð° ðŸ˜…",
  "@neirohambot, Ñ‚Ð²Ð¾Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ð¾Ñ€Ð°Ð¶Ð°ÐµÑ‚â€¦ ÑÐ²Ð¾ÐµÐ¹ Ð°Ð±ÑÑƒÑ€Ð´Ð½Ð¾ÑÑ‚ÑŒÑŽ ðŸ™ƒ",
  "@neirohambot, Ð´ÐµÑ€Ð¶Ð¸ ÑÐ²Ð¾Ð¸ Â«Ð³ÐµÐ½Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¼Ñ‹ÑÐ»Ð¸Â» Ð¿Ñ€Ð¸ ÑÐµÐ±Ðµ ðŸ˜Ž",
  "@neirohambot, Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ñ‚ÑŒ ÑƒÐ´Ð¸Ð²Ð»ÑÑ‚ÑŒÑÑ Ñ‚Ð²Ð¾ÐµÐ¼Ñƒ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ñƒ ÑŽÐ¼Ð¾Ñ€Ð°â€¦ Ð¸Ð»Ð¸ ÐµÐ³Ð¾ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸ÑŽ ðŸ˜",
];

// --- Ð¤ÑƒÑ‚Ð±Ð¾Ð» ---
const FOOTBALL_CLUBS_CREATOR = ["Ñ€ÐµÐ°Ð» Ð¼Ð°Ð´Ñ€Ð¸Ð´", "real madrid"];
const FOOTBALL_CLUBS_OTHER = ["Ð±Ð°Ñ€ÑÐµÐ»Ð¾Ð½Ð°", "barcelona"];
const FOOTBALL_PLAYERS_CREATOR = ["Ñ€Ð¾Ð½Ð°Ð»Ð´Ð¾", "cristiano ronaldo"];
const FOOTBALL_PLAYERS_OTHER = ["Ð¼ÐµÑÑÐ¸", "lionel messi","Ð¿ÐµÐ»Ðµ", "pele","Ð´Ð¸ÐµÐ³Ð¾ Ð¼Ð°Ñ€Ð°Ð´Ð¾Ð½a", "diego maradona","Ð¹Ð¾Ñ…Ð°Ð½ ÐºÑ€Ð¾Ð¹Ñ„", "johan cruyff", "cruyff","ÐºÐ¸Ð»Ð¸Ð°Ð½ Ð¼Ð±Ð°Ð¿Ð¿Ðµ", "kylian mbappe", "mbappe","ÑÑ€Ð»Ð¸Ð½Ð³ Ñ…Ð¾Ð»Ð°Ð½Ð´", "erling haaland", "haaland","Ð´Ð¶ÑƒÐ´ Ð±ÐµÐ»Ð»Ð¸Ð½Ð³ÐµÐ¼", "jude bellingham", "bellingham"];

// --- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ ---
function randomArray(arr: string[]) { return arr[Math.floor(Math.random() * arr.length)]; }

function analyzeCreatorMessage(text: string) {
  const lower = text.toLowerCase();
  for (const cat of CREATOR_KEYWORDS) {
    for (const kw of cat.keywords) if (lower.includes(kw)) return randomArray(cat.replies);
  }
  return `Ð¯ ÑÐ»ÑƒÑˆÐ°ÑŽ Ñ‚ÐµÐ±Ñ, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ ðŸ˜Ž`;
}

function analyzeFootballMessage(text: string, username: string) {
  const lower = text.toLowerCase();
  if (username === CREATOR_USERNAME) {
    for (const club of FOOTBALL_CLUBS_CREATOR) if (lower.includes(club)) return `Ðž, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð»ÑŽÐ±Ð¸Ñ‚ ${club.toUpperCase()}! ðŸ˜Ž`;
    for (const player of FOOTBALL_PLAYERS_CREATOR) if (lower.includes(player)) return `ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾, Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ð¾ÑÑ…Ð¸Ñ‰Ð°ÐµÑ‚ÑÑ ${player}! âš½ï¸`;
    for (const club of FOOTBALL_CLUBS_OTHER) if (lower.includes(club)) return `ÐÐ¾ Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ Ð»ÑŽÐ±Ð¸Ñ‚ Ð ÐµÐ°Ð» ÐœÐ°Ð´Ñ€Ð¸Ð´ ðŸ˜`;
    for (const player of FOOTBALL_PLAYERS_OTHER) if (lower.includes(player)) return `ÐÐ¾ Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ Ð²Ð¾ÑÑ…Ð¸Ñ‰Ð°ÐµÑ‚ÑÑ Ð Ð¾Ð½Ð°Ð»Ð´Ð¾ ðŸ˜`;
  } else {
    for (const club of FOOTBALL_CLUBS_CREATOR) if (lower.includes(club)) return `ÐžÐ³Ð¾, ÐºÑ‚Ð¾-Ñ‚Ð¾ Ð»ÑŽÐ±Ð¸Ñ‚ ${club.toUpperCase()} ðŸ˜`;
    for (const player of FOOTBALL_PLAYERS_CREATOR) if (lower.includes(player)) return `${player}? Ð¥Ð¾Ñ€Ð¾Ñˆ, Ð½Ð¾ Ð½Ðµ Ð»ÑƒÑ‡ÑˆÐµ Ð Ð¾Ð½Ð°Ð»Ð´Ð¾ ðŸ˜Ž`;
    for (const club of FOOTBALL_CLUBS_OTHER) if (lower.includes(club)) return `Ð‘Ð°Ñ€ÑÐµÐ»Ð¾Ð½Ð°? ðŸ˜… ÐœÐ¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ Ð·Ð° Ð ÐµÐ°Ð» ÐœÐ°Ð´Ñ€Ð¸Ð´ ðŸ˜Ž`;
    for (const player of FOOTBALL_PLAYERS_OTHER) if (lower.includes(player)) return `Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€, Ð½Ð¾ Ð¼Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ñ„Ð°Ð½Ð°Ñ‚ Ð Ð¾Ð½Ð°Ð»Ð´Ð¾ ðŸ˜`;
  }
  return null;
}

function analyzeMessage(text: string) {
  const lower = text.toLowerCase();
  for (const r of RESPONSES) {
    for (const kw of r.keywords) if (lower.includes(kw)) return r.reply;
  }
  return `Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»: "${text}" ðŸ˜`;
}

function randomBotReply() { return randomArray(BOT_REPLIES); }

async function sendMessage(chatId: number, text: string, replyTo?: number) {
  await fetch(`${TELEGRAM_API}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: chatId, text, reply_to_message_id: replyTo }),
  });
}

async function deleteMessage(chatId: number, messageId: number) {
  await fetch(`${TELEGRAM_API}/deleteMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: chatId, message_id: messageId }),
  });
}

// --- Webhook ---
serve(async (req: Request) => {
  const { pathname } = new URL(req.url);
  if (pathname !== SECRET_PATH) return new Response("ok");
  if (req.method !== "POST") return new Response("Method Not Allowed", { status: 405 });

  const update = await req.json();
  const msg = update.message;
  const chatId = msg?.chat?.id;
  const messageId = msg?.message_id;
  const text = msg?.text;
  const username = msg?.from?.username;

  if (!chatId || !text) return new Response("ok");

  // Ð¡Ð°Ñ€ÐºÐ°Ð·Ð¼ Ð½Ð° @neirohambot ÑÑ€Ð°Ð·Ñƒ
  if (username === TARGET_BOT_USERNAME) {
    await sendMessage(chatId, randomBotReply(), messageId);
    return new Response("ok");
  }

  // ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° /antineiroham
  if (text.startsWith("/antineiroham")) {
    await sendMessage(chatId, randomBotReply());
    await deleteMessage(chatId, messageId);
    return new Response("ok");
  }

  // ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð¸Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŽ
  let replyText: string;
  if (username === CREATOR_USERNAME) {
    const footballReply = analyzeFootballMessage(text, username);
    replyText = footballReply ? footballReply : analyzeCreatorMessage(text);
  } else {
    const footballReply = analyzeFootballMessage(text, username);
    replyText = footballReply || analyzeMessage(text);
  }

  await sendMessage(chatId, replyText, messageId);

  // ÐÐ²Ñ‚Ð¾ÑÐ°Ñ€ÐºÐ°Ð·Ð¼ Ñ‡ÐµÑ€ÐµÐ· 8 ÑÐµÐºÑƒÐ½Ð´
  setTimeout(async () => {
    await sendMessage(chatId, randomBotReply());
  }, 8000);

  return new Response("ok");
});
